function xFavorite(){var e;let t=document.cookie.split("; ").find(e=>e.startsWith("x_favorite_time="))?.split("=")[1],a=Math.floor(Date.now()/1e3),r=t||0,i=null!=document.cookie.split("; ").find(e=>e.startsWith("x_logged_in_user="))&&document.body.classList.contains("logged-in");if(a-r>300&&!i){let o=xFavoriteObject.sec;fetch(xFavoriteObject.ajaxurl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},body:new URLSearchParams({action:"x_validate_favorite_ids",sec:o}).toString(),credentials:"same-origin"}).then(e=>e.json()).then(e=>{e.success}).catch(e=>{console.error("Error updating cookie:",e)})}function d(e){e.style.height=e.scrollHeight+"px",e.offsetHeight,e.classList.add("x-favorite_fade-out"),e.addEventListener("transitionend",function(){e.remove()},{once:!0})}function s(e,t,a,r,i,o=!1){if(e.data[t]){let d=e.data[t];d.includes(a)?r.dispatchEvent(new CustomEvent("x_favorite:added",{detail:{data:e.data,postType:t,postId:a}})):d.length>0?r.dispatchEvent(new Event("x_favorite:removed",{detail:{postType:t,postId:a}})):"clear"===i?r.dispatchEvent(new CustomEvent("x_favorite:cleared",{detail:{postType:t}})):r.dispatchEvent(new Event("x_favorite:removed",{detail:{postType:t,postId:a}}))}else r.dispatchEvent(new CustomEvent("x_favorite:cleared",{detail:{postType:t}}));(e.message||o)&&r.dispatchEvent(new CustomEvent("x_favorite:maximum-reached",{detail:{postType:t}})),window.dispatchEvent(new CustomEvent("x_favorite:updated",{detail:{data:e.data,postType:t}}))}function l(e){let t=`; ${document.cookie}`.split(`; ${e}=`);return 2===t.length?decodeURIComponent(t.pop().split(";").shift()):null}function n(e,t,a){let r=new Date;r.setTime(r.getTime()+864e5*a);let i="expires="+r.toUTCString();document.cookie=`${e}=${encodeURIComponent(t)}; ${i}; secure; SameSite=Strict; path=/`}let c=function(e,a=!1){let r=xFavoriteObject.sec,i=xFavoriteObject.ajaxurl,o=!!document.cookie.split("; ").find(e=>e.startsWith("x_logged_in_user="))&&document.body.classList.contains("logged-in"),c={};document.cookie.split("; ").forEach(e=>{let[t,a]=e.split("=");t.startsWith("x_favorite_ids__")&&(c[t.replace("x_favorite_ids__","")]=JSON.parse(decodeURIComponent(a)||"[]"))});let x=c;e.querySelectorAll(".brxe-xfavorite").forEach(a=>{let c=a.getAttribute("data-x-favorite"),v=c?JSON.parse(c):{},f=a.getAttribute("data-x-type"),u=a.getAttribute("data-x-list"),p=a.hasAttribute("data-x-list-max")?parseInt(a.getAttribute("data-x-list-max")):0,y=parseInt(a.getAttribute("data-post-id"));a.hasAttribute("data-x-item-id")&&(y=parseInt(a.getAttribute("data-x-item-id")));let h=a.querySelector("button");if(x){var m,b,g,S,T,E;m=x,b=a,g=f,S=h,T=u,E=y,m&&("add_remove"===g&&S?m[T]&&m[T].includes(E)?(S.classList.add("x-favorite_added"),S.setAttribute("aria-pressed","true")):(S.classList.remove("x-favorite_added"),S.setAttribute("aria-pressed","false")):"count"===g&&b.querySelector(".x-favorite_count-inner")&&(m[T]&&m[T].length>0?(b.querySelector(".x-favorite_count-inner").innerHTML=m[T].length.toString(),b.querySelector(".x-favorite_count").classList.remove("x-favorite_count-zero")):b.querySelector(".x-favorite_count-inner").innerHTML="0"),document.querySelector('[data-x-favorite-count="'+T+'"]')&&document.querySelectorAll('[data-x-favorite-count="'+T+'"]').forEach(e=>{m[T]&&m[T].length>0?e.innerHTML=m[T].length:e.innerHTML="0"}))}a.addEventListener("click",e=>{a.querySelector(".x-favorite").hasAttribute("disabled")&&e.preventDefault()}),h&&!h.hasAttribute("data-x-click")&&(a.addEventListener("click",e=>{e.preventDefault(),h.classList.add("x-favorite_busy");let d=!1,c=!1;if(o){let x={action:"x_update_favorite",post_id:y,post_type:u,listMaximum:p,cookie:"x_favorite_ids__"+u,sec:r,type:f};fetch(i,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},body:new URLSearchParams(x).toString(),credentials:"same-origin"}).then(e=>e.json()).then(e=>{e.success&&(s(e.data,u,y,a,f),"remove"!==f&&h.classList.remove("x-favorite_busy"))}).catch(e=>{console.error("Error updating cookie:",e)})}else{let v={data:{}},m="x_favorite_ids__";if(document.cookie.split("; ").forEach(e=>{let[t,a]=e.split("=");if(t.startsWith(m)){let r=JSON.parse(decodeURIComponent(a));v.data[t.replace(m,"")]=r,"object"!=typeof r||Array.isArray(r)||Object.keys(r).forEach(e=>{v.data[e]||(v.data[e]=[]),r[e].forEach(t=>{v.data[e].includes(t)||v.data[e].push(t)})})}}),"clear"===f)v.data[u]&&(v.data[u]=[]);else{v.data[u]||(v.data[u]=[]);let b=v.data[u].indexOf(y);-1!==b?v.data[u].splice(b,1):(p>=1&&(c=!0),!c||v.data[u].length<p?(v.data[u].includes(y)||v.data[u].push(y),d=!1):d=!0)}Object.keys(v.data).forEach(e=>{v.data[e].length>0?document.cookie=`${m}${e}=${encodeURIComponent(JSON.stringify(v.data[e]))}; path=/; max-age=604800; secure; samesite=Strict;`:document.cookie=`${m}${e}=; path=/; max-age=0;`}),(t=document.cookie.split("; ").find(e=>e.startsWith("x_favorite_time="))?.split("=")[1])||n("x_favorite_time",Math.floor(Date.now()/1e3),7);let g="x_favorite_allow";l(g)?console.log():n(g,"true",7),setTimeout(()=>{s(v,u,y,a,f,d),"remove"!==f&&h.classList.remove("x-favorite_busy")},200)}}),h.hasAttribute("data-x-click")||h.setAttribute("data-x-click",""),a.addEventListener("x_favorite:cleared",e=>{if(v.clearedText&&a.querySelector(".x-favorite_text-inner")&&(a.querySelector(".x-favorite_text-inner").innerHTML=v.clearedText),h.setAttribute("aria-pressed","true"),"add_remove"!==f){if("clear"===f)document.querySelectorAll('[data-x-favorite-item="'+e.detail.postType+'"]').forEach(e=>{d(e)}),document.querySelectorAll('.brxe-xfavorite[data-x-list="'+e.detail.postType+'"]').forEach(e=>{e.dispatchEvent(new Event("x_favorite:removed"))}),h.classList.add("x-favorite_cleared"),h.setAttribute("aria-pressed","true");else if(null!=v.isLooping){let t=a.closest(".brxe-"+v.isLooping);t&&d(t)}}else h.classList.remove("x-favorite_added"),h.setAttribute("aria-pressed","false"),v.addText&&a.querySelector(".x-favorite_text-inner")&&(a.querySelector(".x-favorite_text-inner").innerHTML=v.addText)}),a.addEventListener("x_favorite:added",t=>{e.querySelectorAll('.brxe-xfavorite[data-x-list="'+u+'"][data-x-type="add_remove"][data-post-id="'+y+'"]').forEach(e=>{e!==a&&e.dispatchEvent(new CustomEvent("x_favorite:also-added",{detail:{postType:u,postId:y}}))}),window.dispatchEvent(new CustomEvent("x_favorite:added",{detail:{postType:u,postId:y}})),a.dispatchEvent(new CustomEvent("x_favorite:count-reached_"+t.detail.data[u].length),{detail:{data:t.detail.data,postType:u}})}),"clear"===f&&a.addEventListener("x_favorite:not_empty",()=>{h.classList.remove("x-favorite_cleared"),v.clearText&&a.querySelector(".x-favorite_text-inner")&&(a.querySelector(".x-favorite_text-inner").innerHTML=v.clearText)}),a.addEventListener("x_favorite:removed",()=>{if(document.querySelectorAll('.brxe-xfavorite[data-x-list="'+u+'"][data-x-type="add_remove"][data-post-id="'+y+'"]').forEach(e=>{e!==a&&e.dispatchEvent(new CustomEvent("x_favorite:also-removed",{detail:{postType:u,postId:y}}))}),"remove"===f){if(null!=v.isLooping){let e=a.closest(".brxe-"+v.isLooping);e&&d(e)}}else h.classList.remove("x-favorite_added");window.dispatchEvent(new CustomEvent("x_favorite:removed",{detail:{postType:u,postId:y}}))}),a.addEventListener("x_favorite:maximum-reached",()=>{h.setAttribute("aria-pressed","false"),v.maxReachedText&&a.querySelector(".x-favorite_text-inner")&&(a.querySelector(".x-favorite_text-inner").innerHTML=v.maxReachedText)}))}),window.addEventListener("x_favorite:updated",e=>{let t=e.detail.postType,a=e.detail.data;a[t]||(a[t]=[]),0===parseInt(a[t].length)&&document.querySelectorAll('.brxe-xfavorite[data-x-type=clear][data-x-list="'+e.detail.postType+'"]').forEach(e=>{e.dispatchEvent(new CustomEvent("x_favorite:cleared",{detail:{postType:t}}))}),document.querySelectorAll(".brxe-xfavorite[data-x-type=count]").forEach(r=>{r.getAttribute("data-x-list")===e.detail.postType&&r.querySelector(".x-favorite_count-inner")&&(r.querySelector(".x-favorite_count-inner").innerHTML=parseInt(a[t].length),0===parseInt(a[t].length)?r.querySelector(".x-favorite_count").classList.add("x-favorite_count-zero"):r.querySelector(".x-favorite_count").classList.remove("x-favorite_count-zero"))}),document.querySelector('[data-x-favorite-count="'+t+'"]')&&document.querySelectorAll('[data-x-favorite-count="'+t+'"]').forEach(e=>{parseInt(a[t].length)>0?e.innerHTML=parseInt(a[t].length):e.innerHTML="0"})}),window.addEventListener("x_favorite:added",e=>{let t=e.detail.postType,a=e.detail.postId,r="";document.querySelectorAll('.brxe-xfavorite[data-x-list="'+t+'"][data-x-type="add_remove"]').forEach(e=>{if((r=e.hasAttribute("data-x-item-id")?parseInt(e.getAttribute("data-x-item-id")):parseInt(e.getAttribute("data-post-id")))===a){let t=e.getAttribute("data-x-favorite"),i=t?JSON.parse(t):{},o=e.querySelector("button");o.setAttribute("aria-pressed","true"),o.classList.add("x-favorite_added"),i.addedText&&o.querySelector(".x-favorite_text-inner")&&(o.querySelector(".x-favorite_text-inner").innerHTML=i.addedText)}})}),window.addEventListener("x_favorite:removed",e=>{let t=e.detail.postType,a=e.detail.postId,r="";document.querySelectorAll('.brxe-xfavorite[data-x-list="'+t+'"][data-x-type="add_remove"]').forEach(e=>{if((r=e.hasAttribute("data-x-item-id")?parseInt(e.getAttribute("data-x-item-id")):parseInt(e.getAttribute("data-post-id")))===a){let t=e.getAttribute("data-x-favorite"),i=t?JSON.parse(t):{},o=e.querySelector("button");o.setAttribute("aria-pressed","false"),o.classList.remove("x-favorite_added"),i.addText&&o.querySelector(".x-favorite_text-inner")&&(o.querySelector(".x-favorite_text-inner").innerHTML=i.addText)}})})};function x(e){if(void 0===e.detail.queryId){if(void 0===e.detail.popupElement)return;c(e.detail.popupElement)}setTimeout(()=>{document.querySelector(".brxe-"+e.detail.queryId)&&c(document.querySelector(".brxe-"+e.detail.queryId).parentElement)},0)}c(document),e=document,l("x_favorite_allow")&&e.querySelectorAll(".brxe-xfavorite").forEach(e=>{e.querySelector(".x-favorite")&&e.querySelector(".x-favorite").removeAttribute("disabled")}),document.addEventListener("bricks/ajax/load_page/completed",x),document.addEventListener("bricks/ajax/pagination/completed",x),document.addEventListener("bricks/ajax/popup/loaded",x),document.addEventListener("bricks/ajax/end",x),window.doExtrasFavorite=c,window.xDisAllowFavorite=function e(){if(document.body.classList.contains("logged-in"))return;document.cookie="x_favorite_allow=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";let t=xFavoriteObject.sec;fetch(xFavoriteObject.ajaxurl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},body:new URLSearchParams({action:"x_remove_favorite",sec:t}).toString(),credentials:"same-origin"}).then(e=>e.json()).then(e=>{e.success&&(window.dispatchEvent(new CustomEvent("x_favorite:disallowed")),document.querySelectorAll(".x-favorite").forEach(e=>{e.setAttribute("disabled",""),e.classList.remove("x-favorite_added")}))}).catch(e=>{console.error("Error updating cookie:",e)}),document.querySelectorAll("[data-x-favorite-count").forEach(e=>{e.innerHTML="0"}),document.querySelectorAll(".x-favorite_count").forEach(e=>{e.classList.add("x-favorite_count-zero"),e.querySelector(".x-favorite_count-inner")&&(e.querySelector(".x-favorite_count-inner").innerHTML="0")})},window.xAllowFavorite=function e(t=7){if(document.body.classList.contains("logged-in"))return;let a="x_favorite_allow";l(a)||n(a,"true",t),document.querySelectorAll(".brxe-xfavorite").forEach(e=>{e.querySelector(".x-favorite")&&e.querySelector(".x-favorite").removeAttribute("disabled")}),window.dispatchEvent(new CustomEvent("x_favorite:allowed"))}}document.addEventListener("DOMContentLoaded",function(e){bricksIsFrontend&&xFavorite()});
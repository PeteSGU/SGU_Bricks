function xFavoritePopover(){let e=function(e){e.querySelectorAll(".brxe-xfavorite[data-x-tooltip]").forEach(e=>{let t=e.getAttribute("data-x-favorite"),o=t?JSON.parse(t):{},r=e.getAttribute("data-x-type"),a,n,d=o.tooltipAddedText,i=o.disabledText,l=new DOMParser,s=l.parseFromString(i,"text/html"),c=s.body.textContent,x=c;e.querySelector(".x-favorite_added")||(d=o.removedText),"remove"===r&&(d=o.removeTooltipText),"clear"===r&&(d=o.clearTooltipText),e.querySelector(".x-favorite[disabled]")&&(d=x),document.querySelector("body > .brx-body.iframe")?(n=e.querySelector(".x-favorite"),a={render(t){let o=e.querySelector("[data-tippy-root]");return{popper:o}},allowHTML:!0,interactive:!0,arrow:!0,trigger:"click",appendTo:e.querySelector(".x-favorite-tooltip-content"),placement:o.placement,maxWidth:"none",animation:"extras",theme:"extras",touch:!0,offset:[o.offsetSkidding,o.offsetDistance]}):(n=e.querySelector(".x-favorite"),a={content:d,allowHTML:!0,interactive:!0,arrow:!0,trigger:"mouseenter focus click",appendTo:e,placement:o.placement,maxWidth:"none",animation:"extras",theme:"extras",touch:["hold",1e3],interactiveDebounce:50,followCursor:"false"!==o.followCursor&&o.followCursor,delay:o.delay,offset:[o.offsetSkidding,o.offsetDistance],onShow(t){tippy.hideAll({exclude:t}),e.addEventListener("keydown",function(e){("Escape"===e.key||"Esc"===e.key)&&t.hide()}),e.addEventListener("mouseleave",function(){})}});let v=e.dataset.xId;if(o.isLooping&&(v=e.dataset.xId+"_"+o.isLooping),void 0!==window.xFavoriteTippy.Instances[v])return;let p=tippy(n,a);function u(){p.setContent(o.tooltipAddedText),tippy.currentInput.isTouch&&p.show()}function f(){"remove"!==r&&(tippy.currentInput.isTouch?p.setContent(o.removedTooltipText):p.setContent(o.removedText),tippy.currentInput.isTouch&&p.show())}window.xFavoriteTippy.Instances[v]=p,e.addEventListener("x_favorite:added",u),e.addEventListener("x_favorite:also-added",u),e.addEventListener("x_favorite:removed",f),e.addEventListener("x_favorite:also-removed",f),e.addEventListener("x_favorite:cleared",e=>{"clear"===r?(p.setContent(o.clearedTooltipText),tippy.currentInput.isTouch&&p.show()):"add_remove"===r&&o.removedText&&p.setContent(o.removedText)}),e.addEventListener("x_favorite:maximum-reached",()=>{"add_remove"===r&&(o.maxReachedTooltipText&&(p.setContent(o.maxReachedTooltipText),p.show(),p.setProps({onHidden(e){e.setContent(d)}})),tippy.currentInput.isTouch&&p.show())}),window.addEventListener("x_favorite:disallowed",e=>{p.setContent(x)}),"clear"===r&&window.addEventListener("x_favorite:updated",e=>{let t=e.detail.postType,r=e.detail.data;""==r[t]?p.setContent(o.clearedTooltipText):p.setContent(o.clearTooltipText)}),window.addEventListener("x_favorite:allowed",t=>{d=e.querySelector(".x-favorite_added")?o.tooltipAddedText:o.removedText,"remove"===r&&(d=o.removeTooltipText),"clear"===r&&(d=o.clearTooltipText),p.setContent(d)})})};function t(t){if(void 0===t.detail.queryId){if(void 0===t.detail.popupElement)return;e(t.detail.popupElement)}setTimeout(()=>{document.querySelector(".brxe-"+t.detail.queryId)&&e(document.querySelector(".brxe-"+t.detail.queryId).parentElement)},0)}e(document),document.addEventListener("bricks/ajax/load_page/completed",t),document.addEventListener("bricks/ajax/pagination/completed",t),document.addEventListener("bricks/ajax/popup/loaded",t),document.addEventListener("bricks/ajax/end",t),window.doExtrasFavoritePopover=e}document.addEventListener("DOMContentLoaded",function(e){bricksIsFrontend&&xFavoritePopover()});
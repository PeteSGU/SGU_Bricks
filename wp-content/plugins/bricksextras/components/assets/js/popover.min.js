function xPopover(){let e=function(e,t=!1){e.querySelectorAll(".brxe-xpopover").forEach(e=>{if(window.xTippy.Instances[e.dataset.xId]&&t&&e.closest("[data-query-element-id]"))return;let o=e.getAttribute("data-x-popover"),n=o?JSON.parse(o):{},r=!1;null!=n.isLooping&&(r=!0);let i=n.appendBody,p="brxe-"+n.isLooping,c,a=r?e.closest(".brxe-"+n.isLooping).querySelector(n.elementSelector):n.elementSelector,l,d;if(document.querySelector("body > .brx-body.iframe"))d=e.querySelector(".x-popover_button"),l={render(t){let o=e.querySelector("[data-tippy-root]");return{popper:o}},allowHTML:!0,interactive:!0,arrow:!0,trigger:"click",appendTo:e.querySelector(".x-popover_content"),placement:n.placement,maxWidth:"none",animation:"extras",theme:"extras",touch:!0,moveTransition:"transform "+n.moveTransition+"ms ease-out",offset:[n.offsetSkidding,n.offsetDistance]};else{let s=n.multipleTriggers?e.querySelector(".x-popover_content-inner").innerHTML:e.querySelector(".x-popover_content-inner"),y=n.dynamicContent?"":s,u=n.dynamicContent?a+'[data-tippy-content]:not([data-tippy-content=""]':a;d=n.elementSelector?u:e.querySelector(".x-popover_button"),l={content:y,allowHTML:!0,interactive:!0,arrow:!0,trigger:n.interaction,appendTo:i?document.body:e.querySelector(".x-popover_content"),placement:n.placement,maxWidth:"none",animation:"extras",theme:"extras",touch:!0,interactiveDebounce:50,followCursor:"false"!==n.followCursor&&n.followCursor,delay:n.delay,moveTransition:"transform "+n.moveTransition+"ms ease-out",offset:[n.offsetSkidding,n.offsetDistance],onCreate(t){if(i){let o=t.popper;e.classList.forEach(e=>{o.classList.add(e)}),o.classList.add("x-popover_footer"),e.id&&(o.id=e.id);let n=t.popper.querySelector(".tippy-box");if(n){let r=n.querySelector(".tippy-content");if(r){let p=document.createElement("div");p.classList.add("x-popover_content"),r.parentNode.insertBefore(p,r),p.appendChild(r)}}}},onShow(t){if(tippy.hideAll({exclude:t}),setTimeout(()=>{"function"==typeof bricksLazyLoad&&bricksLazyLoad()},50),e.addEventListener("keydown",function(e){("Escape"===e.key||"Esc"===e.key)&&t.hide()}),i&&r){let o=t.popper;(c=document.createElement("div")).className=p,c.classList.add("x-popover_footer_loop"),document.body.appendChild(c),c.appendChild(o)}},onShown(){e.dispatchEvent(new Event("x_popover:show")),document.addEventListener("keydown",function(e){("Escape"===e.key||"Esc"===e.key)&&tippy.hideAll()}),e.querySelector(".x-popover_button")&&e.querySelector(".x-popover_button").addEventListener("keydown",function(t){!("Tab"===t.code&&!t.shiftKey&&e.querySelector(".tippy-content .x-popover_content-inner"))||(e.querySelector(".tippy-content").setAttribute("tabindex","0"),e.querySelector(".tippy-content a[href]:first-child")||e.querySelector(".tippy-content h1:first-child > a[href]")||e.querySelector(".tippy-content h2:first-child > a[href]")||e.querySelector(".tippy-content h3:first-child > a[href]")||e.querySelector(".tippy-content h4:first-child > a[href]")||e.querySelector(".tippy-content h5:first-child > a[href]")||e.querySelector(".tippy-content h6:first-child > a[href]")||e.querySelector(".tippy-content button:first-child")||e.querySelector(".tippy-content input:first-child")||e.querySelector(".tippy-content textarea:first-child")||e.querySelector(".tippy-content select:first-child")||e.querySelector(".tippy-content details:first-child")||e.querySelector('.tippy-content [tabindex]:not([tabindex="-1"]:first-child')||(t.preventDefault(),e.querySelector(".tippy-content").focus()))})},onHide(t){if(e.dispatchEvent(new Event("x_popover:hide")),i&&r){let o=t.popper,n=o.parentNode;n&&n.remove()}}}}let f=tippy(d,l);window.xTippy.Instances[e.dataset.xId]=f,n.multipleTriggers&&!document.querySelector("body > .brx-body.iframe")&&tippy.createSingleton(f,l),e.addEventListener("x_popover:show",()=>{let t=e.querySelector(".x-popover_content");t&&("function"==typeof doExtrasAccordion&&doExtrasAccordion(t),"function"==typeof doExtrasSlider&&doExtrasSlider(t),"function"==typeof doExtrasReadmore&&setTimeout(()=>{doExtrasReadmore(t)},100),"function"==typeof doExtrasLightbox&&doExtrasLightbox(t,!0),"function"==typeof doExtrasSocialShare&&doExtrasSocialShare(t),"function"==typeof doExtrasOffCanvas&&doExtrasOffCanvas(t),"function"==typeof doExtrasModal&&doExtrasModal(t),"function"==typeof doExtrasMediaPlayer&&doExtrasMediaPlayer(t))})})};function t(t){if(void 0===t.detail.queryId){if(void 0===t.detail.popupElement)return;e(t.detail.popupElement,!0)}setTimeout(()=>{document.querySelector(".brxe-"+t.detail.queryId)&&e(document.querySelector(".brxe-"+t.detail.queryId).parentElement,!0)},0)}e(document),document.addEventListener("bricks/ajax/load_page/completed",t),document.addEventListener("bricks/ajax/pagination/completed",t),document.addEventListener("bricks/ajax/popup/loaded",t),document.addEventListener("bricks/ajax/end",t),window.doExtrasPopover=e,"undefined"!=typeof bricksextras&&(bricksextras.popover={close(e){let t=e?.target||!1;if(t&&t.getAttribute("data-x-id")){let o=xTippy.Instances[t.getAttribute("data-x-id")];o&&o.hide()}},open(e){let t=e?.target||!1;if(t&&t.getAttribute("data-x-id")){let o=xTippy.Instances[t.getAttribute("data-x-id")];o&&o.show()}}})}document.addEventListener("DOMContentLoaded",function(e){bricksIsFrontend&&xPopover()});